<%-include("../layouts/userlayout/header.ejs") %>
<%-include("../layouts/userlayout/nav.ejs") %>


<!-- The content of header.ejs and nav.ejs goes here -->

<!-- Hero Section -->
<section class="hero-wrap hero-bread" style="background-image: url('/productImages/bg_6.jpg');">
  <div class="container">
    <div class="row no-gutters slider-text align-items-center justify-content-center">
      <div class="col-md-9 ftco-animate text-center">
        <p class="breadcrumbs"><span class="mr-2"><a href="/home">Home</a></span> <span>Shop</span></p>
        <h1 class="mb-0 bread">Shop</h1>
      </div>
    </div>
  </div>
</section>

<!-- Sidebar -->

<section>
<div class="flex-column">
  <div class="container">
    <div class="flex-column">
      <div class="col-md-4 col-lg-2">
        <div class="sidebar">
          <!-- Categories Panel -->
          <div class="sidebar-box-2">
            <h2 class="heading">Categories</h2>
            <div class="fancy-collapse-panel">
              <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                <div class="panel panel-default">
                  <div class="panel-heading" role="tab" id="headingOne">
                    <h4 class="panel-title">
                      <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Shoes</a>
                    </h4>
                  </div>
                  <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                    <div class="panel-body">
                      <!-- Category Select Dropdown -->
                      <label for="exampleInputEmail3">Category</label>
                      <select id="category._id" class="form-control" name="category" required>
                        <% category.forEach((item) => { %>
                          <option value="<%= item._id %>"><%= item.name %></option>
                        <% }) %>  
                      </select>
                    </div>
                  </div>
                </div>
                <!-- Add more categories if needed -->
              </div>
            </div>
          </div>
        </div>          
        </div>
      
  
      <!-- Product List -->
      <div class="col-md-8 col-lg-10">
        <section class="ftco-section bg-light">
          <div class="container">
            <div class="row">
              <% productData.forEach((product) => { %>
                <div class="col-sm-12 col-md-12 col-lg-4 ftco-animate d-flex">
                  <div class="product d-flex flex-column">
                    <a href="/singleproduct/<%= product.id %>"><img src="/productImages/<%= product.image[0] %>" class="img-fluid" alt="Item" /></a>
                    <div class="overlay"></div>
                    <div class="text py-3 pb-4 px-3">
                      <div class="d-flex">
                        <div class="cat">
                          <span><input type="hidden" id="<%= category._id %>"><%= product.category.name %></span>
                        </div>
                        <div class="rating">
                          <p class="text-right mb-0">
                            <a href="#"><span class="ion-ios-star-outline"></span></a>
                            <a href="#"><span class="ion-ios-star-outline"></span></a>
                            <a href="#"><span class="ion-ios-star-outline"></span></a>
                            <a href="#"><span class="ion-ios-star-outline"></span></a>
                            <a href="#"><span class="ion-ios-star-outline"></span></a>
                          </p>
                        </div>
                      </div>
                      <h3><a href="/singleproduct/<%= product.id %>"><%= product.name %></a></h3>
                      <div class="pricing">
                        <p class="price"><span><%= product.price %></span></p>
                      </div>
                      <p class="bottom-area d-flex px-3">
                        <a href="user/cart" class="add-to-cart text-center py-2 mr-1"><span>Add to cart <i class="ion-ios-add ml-1"></i></span></a>
                        <a href="/singleproduct/<%= product.id %>" class="buy-now text-center py-2">Buy now<span><i class="ion-ios-cart ml-1"></i></span></a>
                      </p>
                    </div>
                  </div>
                </div>
              <% }); %>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>
</div>

<!-- //paginaton -->

<div class="col text-center  d-flex align-items-center justify-content-center">
  <div class="block-27">
    <ul>
      <li><a href="/shop?page=<%= previousPage %>">&lt;</a></li>
   <% if( currentPage !== 1 ) { %> 
       <li><a href="/shop?page=1">1</a></li>
   <% } %>
   <% if( currentPage > 2 ) { %>
    <li><a href="/shop?page=<%= previousPage %>"><%= previousPage %></a></li> 
   <% } %>
   <a href="/shop?page=<%= currentPage %>" class="active"><%= currentPage %></a></li>
   <% if( hasNextpage ) { %>
    <li><a href="/shop?page=<%= nextPage %>"><%= nextPage %></a></li> 
   <% } %>
   <% if( (lastPage - currentPage > 2) ){ %>
    <li><span>...</span></li>
   <% } %>    
   <% if( nextPage !== lastPage && currentPage !== lastPage ) { %>
    <li><a href="/shop?page=<%= lastPage %>d %>"><%= lastPage %></a></li>
   <% } %>
   <li><a href="/shop?page=<%= nextPage %>">&gt;</a></li>
    </ul>
  </div>
</div>
</section>
<!-- The content of footerNav.ejs and footer.ejs goes here -->



<%-include("../layouts/userlayout/footerNav.ejs") %>
<%-include("../layouts/userlayout/footer.ejs") %>